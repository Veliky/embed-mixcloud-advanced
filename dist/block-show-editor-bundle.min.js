!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=window.wp.i18n},function(e,t,n){"use strict";n.r(t),n.d(t,"embedAudioIcon",(function(){return o})),n.d(t,"lightThemeIcon",(function(){return c})),n.d(t,"darkThemeIcon",(function(){return l})),n.d(t,"pictureWidgetIcon",(function(){return a})),n.d(t,"classicWidgetIcon",(function(){return s})),n.d(t,"miniWidgetIcon",(function(){return u})),n.d(t,"noArtworkWidgetIcon",(function(){return d})),n.d(t,"coveredWidgetIcon",(function(){return p})),n.d(t,"miniNoArtworkWidgetIcon",(function(){return h})),n.d(t,"previewIcon",(function(){return v})),n.d(t,"mixcloudIcon",(function(){return f})),n.d(t,"downloadIcon",(function(){return w})),n.d(t,"previewAlignLeft",(function(){return m})),n.d(t,"previewAlignCenter",(function(){return b})),n.d(t,"previewAlignRight",(function(){return g}));var r=n(0),i=n(1),o=Object(r.createElement)(i.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(r.createElement)(i.Path,{fill:"none",d:"M0 0h24v24H0V0z"}),Object(r.createElement)(i.Path,{d:"M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h18v14zM8 15c0-1.66 1.34-3 3-3 .35 0 .69.07 1 .18V6h5v2h-3v7.03c-.02 1.64-1.35 2.97-3 2.97-1.66 0-3-1.34-3-3z"})),c=Object(r.createElement)(i.SVG,{viewBox:"0 0 302.4 302.4",xmlns:"http://www.w3.org/2000/svg"},Object(r.createElement)("path",{d:"M204.8,97.6C191.2,84,172,75.2,151.2,75.2s-40,8.4-53.6,22.4c-13.6,13.6-22.4,32.8-22.4,53.6s8.8,40,22.4,53.6 c13.6,13.6,32.8,22.4,53.6,22.4s40-8.4,53.6-22.4c13.6-13.6,22.4-32.8,22.4-53.6S218.8,111.2,204.8,97.6z"}),Object(r.createElement)("path",{d:"M151.2,51.6c5.6,0,10.4-4.8,10.4-10.4V10.4c0-5.6-4.8-10.4-10.4-10.4c-5.6,0-10.4,4.8-10.4,10.4v30.8 C140.8,46.8,145.6,51.6,151.2,51.6z"}),Object(r.createElement)("path",{d:"M236.4,80.8l22-22c4-4,4-10.4,0-14.4s-10.4-4-14.4,0l-22,22c-4,4-4,10.4,0,14.4C225.6,84.8,232,84.8,236.4,80.8z"}),Object(r.createElement)("path",{d:"M292,140.8h-30.8c-5.6,0-10.4,4.8-10.4,10.4c0,5.6,4.8,10.4,10.4,10.4H292c5.6,0,10.4-4.8,10.4-10.4 C302.4,145.6,297.6,140.8,292,140.8z"}),Object(r.createElement)("path",{d:"M236,221.6c-4-4-10.4-4-14.4,0s-4,10.4,0,14.4l22,22c4,4,10.4,4,14.4,0s4-10.4,0-14.4L236,221.6z"}),Object(r.createElement)("path",{d:"M151.2,250.8c-5.6,0-10.4,4.8-10.4,10.4V292c0,5.6,4.8,10.4,10.4,10.4c5.6,0,10.4-4.8,10.4-10.4v-30.8 C161.6,255.6,156.8,250.8,151.2,250.8z"}),Object(r.createElement)("path",{d:"M66,221.6l-22,22c-4,4-4,10.4,0,14.4s10.4,4,14.4,0l22-22c4-4,4-10.4,0-14.4C76.8,217.6,70.4,217.6,66,221.6z"}),Object(r.createElement)("path",{d:"M51.6,151.2c0-5.6-4.8-10.4-10.4-10.4H10.4c-5.6,0-10.4,4.8-10.4,10.4s4.8,10.4,10.4,10.4h30.8 C46.8,161.6,51.6,156.8,51.6,151.2z"}),Object(r.createElement)("path",{d:"M66,80.8c4,4,10.4,4,14.4,0s4-10.4,0-14.4l-22-22c-4-4-10.4-4-14.4,0s-4,10.4,0,14.4L66,80.8z"})),l=Object(r.createElement)(i.SVG,{viewBox:"0 0 480 480",xmlns:"http://www.w3.org/2000/svg"},Object(r.createElement)(i.Path,{d:"M459.782,347.328c-4.288-5.28-11.488-7.232-17.824-4.96c-17.76,6.368-37.024,9.632-57.312,9.632 c-97.056,0-176-78.976-176-176c0-58.4,28.832-112.768,77.12-145.472c5.472-3.712,8.096-10.4,6.624-16.832 S285.638,2.4,279.078,1.44C271.59,0.352,264.134,0,256.646,0c-132.352,0-240,107.648-240,240s107.648,240,240,240 c84,0,160.416-42.688,204.352-114.176C464.55,360.032,464.038,352.64,459.782,347.328z"})),a=Object(r.createElement)(i.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(r.createElement)(i.Rect,{height:"20",width:"20",y:"2",x:"2",fillOpacity:"0",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor"})),s=Object(r.createElement)(i.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(r.createElement)(i.Rect,{height:"12",width:"22",y:"6",x:"1",fillOpacity:"0",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor"}),Object(r.createElement)("line",{strokeLinecap:"null",strokeLinejoin:"null",y2:"7",x2:"11",y1:"18",x1:"11",fillOpacity:"null",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor",fill:"none"}),Object(r.createElement)("line",{strokeLinecap:"null",strokeLinejoin:"null",y2:"12",x2:"11",y1:"12",x1:"22",fillOpacity:"null",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor",fill:"none"})),u=Object(r.createElement)(i.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(r.createElement)(i.Rect,{height:"8",width:"22",y:"8",x:"1",fillOpacity:"0",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor"}),Object(r.createElement)("line",{strokeLinecap:"null",strokeLinejoin:"null",y2:"9",x2:"10",y1:"16",x1:"10",fillOpacity:"null",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor",fill:"none"})),d=Object(r.createElement)(i.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(r.createElement)(i.Rect,{height:"12",width:"22",y:"6",x:"1",fillOpacity:"0",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor"}),Object(r.createElement)("line",{strokeLinecap:"null",strokeLinejoin:"null",y2:"12",x2:"2",y1:"12",x1:"22",fillOpacity:"null",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor",fill:"none"})),p=Object(r.createElement)(i.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(r.createElement)(i.Rect,{height:"12",width:"22",y:"6",x:"1",fillOpacity:"0",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor"})),h=Object(r.createElement)(i.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(r.createElement)(i.Rect,{height:"8",width:"22",y:"8",x:"1",fillOpacity:"0",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor"})),v=Object(r.createElement)(i.SVG,{className:"mea-show__spinner",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},Object(r.createElement)(i.Circle,{cx:"10",cy:"10",r:"9"}),Object(r.createElement)("path",{d:"M8 6l6 4.03L8 14V6z",fill:"currentColor"})),f=Object(r.createElement)(i.SVG,{className:"mea-show__spinner",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},Object(r.createElement)(i.Circle,{cx:"10",cy:"10",r:"9"}),Object(r.createElement)("text",{fill:"currentColor",strokeWidth:"0",x:"5.5",y:"14",fontSize:"11",fontFamily:"sans-serif"},"M")),w=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t="mea-show__spinner"+(e?" mea-show__spinner_download":"");return Object(r.createElement)(i.SVG,{className:t,width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},Object(r.createElement)(i.Circle,{cx:"10",cy:"10",r:"9"}),Object(r.createElement)("path",{d:"M14 8l-4.03 6L6 8h8z",fill:"currentColor"}))},m=Object(r.createElement)(i.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-hidden":"true",focusable:"false"},Object(r.createElement)("line",{strokeLinecap:"null",strokeLinejoin:"null",y2:"2",x2:"1",y1:"2",x1:"9",fillOpacity:"null",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor",fill:"none"}),Object(r.createElement)(i.Rect,{height:"12",width:"22",y:"6",x:"1",fillOpacity:"0",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor"}),Object(r.createElement)("line",{strokeLinecap:"null",strokeLinejoin:"null",y2:"7",x2:"11",y1:"18",x1:"11",fillOpacity:"null",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor",fill:"none"}),Object(r.createElement)("line",{strokeLinecap:"null",strokeLinejoin:"null",y2:"12",x2:"11",y1:"12",x1:"22",fillOpacity:"null",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor",fill:"none"})),b=Object(r.createElement)(i.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-hidden":"true",focusable:"false"},Object(r.createElement)("line",{strokeLinecap:"null",strokeLinejoin:"null",y2:"2",x2:"8",y1:"2",x1:"16",fillOpacity:"null",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor",fill:"none"}),Object(r.createElement)(i.Rect,{height:"12",width:"22",y:"6",x:"1",fillOpacity:"0",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor"}),Object(r.createElement)("line",{strokeLinecap:"null",strokeLinejoin:"null",y2:"7",x2:"11",y1:"18",x1:"11",fillOpacity:"null",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor",fill:"none"}),Object(r.createElement)("line",{strokeLinecap:"null",strokeLinejoin:"null",y2:"12",x2:"11",y1:"12",x1:"22",fillOpacity:"null",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor",fill:"none"})),g=Object(r.createElement)(i.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-hidden":"true",focusable:"false"},Object(r.createElement)("line",{strokeLinecap:"null",strokeLinejoin:"null",y2:"2",x2:"15",y1:"2",x1:"23",fillOpacity:"null",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor",fill:"none"}),Object(r.createElement)(i.Rect,{height:"12",width:"22",y:"6",x:"1",fillOpacity:"0",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor"}),Object(r.createElement)("line",{strokeLinecap:"null",strokeLinejoin:"null",y2:"7",x2:"11",y1:"18",x1:"11",fillOpacity:"null",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor",fill:"none"}),Object(r.createElement)("line",{strokeLinecap:"null",strokeLinejoin:"null",y2:"12",x2:"11",y1:"12",x1:"22",fillOpacity:"null",strokeOpacity:"null",strokeWidth:"2",stroke:"currentColor",fill:"none"}))},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return c}));var r=function(e){return/^\s*(https?:\/\/(.+?\.)?mixcloud\.com\S+)\s*$/i.test(e)},i=function(e){var t=e.match(new RegExp("com/([^/]+)"));return t&&"string"==typeof t[1]&&(e=t[1]),e},o=function(e){return"https://www.mixcloud.com/".concat(e)},c="https://datcoder.com/embed-mixcloud-advanced/"},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){e.exports=window.wp.blockEditor},function(e,t){e.exports=window.wp.data},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){e.exports=window.wp.blocks},function(e,t,n){var r=n(19);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){var r=n(20),i=n(4);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}},function(e,t){e.exports=window.regeneratorRuntime},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(7),i=n.n(r),o=n(5),c=n.n(o),l=[],a=function(){function e(t,n,r,o){i()(this,e),this.container=t,this.previewBtn=n,this.previewUrl=r,this.onPlay=o,this.play=this.play.bind(this),this.stop=this.stop.bind(this),this.on=this.on.bind(this),this.off=this.off.bind(this),this.onClick=this.onClick.bind(this),this.observeDeletion=this.observeDeletion.bind(this),r&&!this.audio&&(this.audio=new Audio(r),this.audio.load(),this.audio.addEventListener("loadeddata",this.on),this.audio.addEventListener("pause",this.stop)),this.playing=!1,this.available=!0,this.observeDeletion()}return c()(e,null,[{key:"getInstance",value:function(t,n,r,i){var o=new e(t,n,r,i),c=!1;return l.forEach((function(e){e.previewUrl===o.previewUrl&&(c=!0)})),c||l.push(o),o}},{key:"pauseAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];l.forEach((function(t){!1!==e&&t.previewUrl===e.previewUrl||t.stop(!1)}))}}]),c()(e,[{key:"observeDeletion",value:function(){var e=this;new MutationObserver((function(t){t.forEach((function(t){Array.from(t.removedNodes).indexOf(e.container)&&e.stop()}))})).observe(document.body,{childList:!0})}},{key:"on",value:function(){this.previewBtn.addEventListener("click",this.onClick)}},{key:"off",value:function(){this.previewBtn.removeEventListener("click",this.onClick)}},{key:"onClick",value:function(){this.playing?this.stop(!1):this.play()}},{key:"updateSpinnerDuration",value:function(e){this.container.style.setProperty("--spinner-duration",e+"s")}},{key:"updateSpinnerProgress",value:function(e){var t=56.52/(this.audio.duration/e)+", "+(56.52-56.52/(this.audio.duration/e));this.container.style.setProperty("--spinner-progress",t)}},{key:"play",value:function(){var e=this;this.constructor.pauseAll(this),this.onPlay(),!this.playing&&this.available&&(this.playing=!0,setTimeout((function(){e.playing&&e.audio&&e.audio.play().then((function(){e.updateSpinnerDuration(e.audio.duration-e.audio.currentTime),e.container.className=e.container.className.replace(" mea-show__wrapper_pause",""),e.container.className+=" mea-show__wrapper_playing"}))}),500))}},{key:"stop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.playing&&(this.playing=!1,this.audio&&(this.audio.pause(),e?(this.audio.currentTime=0,this.updateSpinnerProgress(0)):(this.container.className+=" mea-show__wrapper_pause",this.updateSpinnerProgress(this.audio.currentTime)),this.container.className=this.container.className.replace(" mea-show__wrapper_playing","")))}},{key:"blink",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.container.className+=" mea-show__wrapper_playing",this.updateSpinnerDuration(t),setTimeout((function(){e.container.className=e.container.className.replace(" mea-show__wrapper_playing","")}),1e3*t)}}]),e}()},function(e,t){e.exports=window.wp.compose},function(e,t){function n(e,t,n,r,i,o,c){try{var l=e[o](c),a=l.value}catch(e){return void n(e)}l.done?t(a):Promise.resolve(a).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var c=e.apply(t,r);function l(e){n(c,i,o,l,a,"next",e)}function a(e){n(c,i,o,l,a,"throw",e)}l(void 0)}))}}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){var r=n(23),i=n(24),o=n(25),c=n(27);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||c()}},function(e,t,n){e.exports=n(33)},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}}},function(e,t,n){var r=n(26);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t){e.exports=window.lodash},function(e){e.exports=JSON.parse('{"picture":{"title":"Large Covered Widget","height":180,"hideCover":false},"classic":{"title":"Classic Widget","height":120,"hideCover":true},"noArtwork":{"title":"Widget w/o Artwork","height":120,"hideArtwork":true,"hideCover":true},"covered":{"title":"Covered Widget","height":120,"hideArtwork":true,"hideCover":false},"mini":{"title":"Mini Widget","height":60,"hideCover":true,"mini":true},"miniNoArtwork":{"title":"Mini Widget w/o Artwork","height":60,"hideArtwork":true,"hideCover":true,"mini":true}}')},,,,function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(2),o=n(12),c=n(17),l=n(9),a=n(15),s=n.n(a),u=n(18),d=n.n(u),p=n(7),h=n.n(p),v=n(5),f=n.n(v),w=n(4),m=n.n(w),b=n(13),g=n.n(b),y=n(14),O=n.n(y),k=n(10),j=n.n(k),_=n(8),x=n(1),E=n(3),C=function(e){var t=e.cannotEmbed,n=e.url,o=e.previewInfoLink,c=e.loadPreview,l=e.onSubmit,a=e.onChangeUrl,s=e.onChangeLoadPreview;return Object(r.createElement)(x.Placeholder,{icon:Object(r.createElement)(_.BlockIcon,{icon:E.previewIcon,showColors:!0}),label:Object(i.__)("Mixcloud Advanced","embed-mixcloud-advanced"),className:"wp-block-embed",instructions:t?Object(i.__)("This show could not be embedded!","embed-mixcloud-advanced"):Object(i.__)("Paste a link to the show you want to display on your site.","embed-mixcloud-advanced")},Object(r.createElement)("form",{onSubmit:l},Object(r.createElement)("input",{type:"url",value:n||"",className:"components-placeholder__input"+(t?" components-placeholder__input-error":""),"aria-label":Object(i.__)("Mixcloud URL","embed-mixcloud-advanced"),placeholder:Object(i.__)("Enter URL to embed here…","embed-mixcloud-advanced"),onChange:a}),Object(r.createElement)(x.Button,{isPrimary:!0,type:"submit"},Object(i._x)("Embed","button label"))),Object(r.createElement)("form",null,Object(r.createElement)(x.CheckboxControl,{className:"components-placeholder__learn-more",label:Object(i.__)("Enable preview","embed-mixcloud-advanced"),checked:c,onChange:s})),Object(r.createElement)("div",null,Object(r.createElement)("div",null,Object(i.__)("This function can be disabled. To download preview data, a request will be made from the server to the show page.","embed-mixcloud-advanced")," ",Object(r.createElement)(x.ExternalLink,{href:o,target:"_blank"},Object(i.__)("See more","embed-mixcloud-advanced")))))},P=n(21),S=n.n(P),L=n(16);function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var W=function(e){g()(o,e);var t,n=(t=o,function(){var e,n=j()(t);if(A()){var r=j()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return O()(this,e)});function o(e){var t;return h()(this,o),(t=n.call(this,e)).hideOverlay=t.hideOverlay.bind(m()(t)),t.state={interactive:!1},t._iframe=Object(r.createRef)(),t}return f()(o,[{key:"getContainer",value:function(){return this._iframe.current.parentElement.parentElement}},{key:"getPreviewBtn",value:function(){return this.getContainer().getElementsByClassName("mea-show__preview-btn")[0]}},{key:"componentDidMount",value:function(){var e=this;this.props.previewUrl&&(this.preview=L.a.getInstance(this.getContainer(),this.getPreviewBtn(),this.props.previewUrl,(function(){return e.pause()}))),this._iframe.current.addEventListener("load",(function(t){e.updateWidgetOptions()}))}},{key:"componentWillUnmount",value:function(){this.preview&&this.preview.stop()}},{key:"componentDidUpdate",value:function(){var e=this;!this.preview&&this.props.previewUrl&&(this.preview=L.a.getInstance(this.getContainer(),this.getPreviewBtn(),this.props.previewUrl,(function(){return e.pause()}))),this.preview&&(this.props.previewUrl?this.preview.on():this.preview.off()),this.updateWidgetOptions()}},{key:"pause",value:function(){void 0!==this.widget&&void 0!==this.widget.pause&&this.widget.pause()}},{key:"blinkPreview",value:function(){this.preview&&this.preview.blink()}},{key:"updateWidgetOptions",value:function(){var e=this,t=function(){e.widget.setOption&&(e.widget.setOption("mini",e.props.mini),e.widget.setOption("light",e.props.light),e.widget.setOption("hide_artwork",e.props.hideArtwork),e.widget.setOption("hide_cover",e.props.hideCover),e.props.autoplay?e.widget.play():e.widget.pause(),e.widget.events.play.on((function(){e.preview&&(e.preview.stop(!1),e.preview.constructor.pauseAll(e.preview))})))};void 0!==window.Mixcloud.PlayerWidget&&(this.widget&&this._iframe.current.getBoundingClientRect().y===this.iframeY||(this.widget=window.Mixcloud.PlayerWidget(this._iframe.current),this.iframeY=this._iframe.current.getBoundingClientRect().y,this.widget.ready.then((function(){e._iframe.current.style.setProperty("visibility","visible"),t()}))),t())}},{key:"hideOverlay",value:function(){this.setState({interactive:!0})}},{key:"getUrl",value:function(){var e=this.props,t=e.url,n=e.updateUrl,r=e.mini,i=e.hideCover,o=e.hideArtwork,c=e.light;if(t){var l=(t+="/"!==t[t.length-1]?"/":"").split(".com"),a=S()(l,2);a[0];return"https://www.mixcloud.com/widget/iframe/?feed="+a[1]+(n?"&mini="+(0|r)+"&hide_cover="+(0|i)+"&hide_artwork="+(0|o)+"&light="+(0|c):"")}return!1}},{key:"render",value:function(){var e=this.props,t=e.previewUrl,n=e.height,o=e.light,c=e.previewAlign,l=e.autoplay,a=this.state.interactive,s=this.getUrl();if(s){var u="mea-show__container"+(t?" mea-show__container_with_preview":""),d=" mea-show__preview-btn_"+c;return Object(r.createElement)("div",{className:u,onFocus:this.hideOverlay},t&&Object(r.createElement)("div",{className:"mea-show__preview-btn "+(o?"mea-show__preview-btn_light":"")+d},E.previewIcon,Object(r.createElement)("span",null,Object(i.__)("Preview","embed-mixcloud-advanced"))),Object(r.createElement)("div",{className:"mea-show__wrapper","data-preview-url":t},Object(r.createElement)("iframe",{ref:this._iframe,width:"100%",height:n,src:s,frameBorder:"0",allow:l?"autoplay":null})),!a&&Object(r.createElement)("div",{className:"block-library-embed__interactive-overlay",onMouseUp:this.hideOverlay}))}}}],[{key:"getDerivedStateFromProps",value:function(e,t){return!e.isSelected&&t.interactive?{interactive:!1}:null}}]),o}(r.Component),R=n(11),U=n.n(R);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){var t=e.url,n=e.emitLoadPreview,o=e.previewEnabled,c=e.togglePreviewEnabled,l=e.previewAlign,a=e.emitChangePreviewAlign,s=e.previewLoading,u={left:{icon:E.previewAlignLeft,title:Object(i.__)("Left","embed-mixcloud-advanced")},center:{icon:E.previewAlignCenter,title:Object(i.__)("Center","embed-mixcloud-advanced")},right:{icon:E.previewAlignRight,title:Object(i.__)("Right","embed-mixcloud-advanced")}},d=Object.keys(u).map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u[e],{isActive:l===e,className:"aaa",onClick:function(){return a(e)}})}));return t?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(x.Toolbar,{className:"mea-toolbar",controls:[{icon:E.previewIcon,title:Object(i.__)("Enable preview","embed-mixcloud-advanced"),onClick:c,isActive:o}]}),o&&Object(r.createElement)(x.ToolbarGroup,{className:"mea-toolbar",icon:u[l]?u[l].icon:u.right.icon,label:Object(i.__)("Preview button align","embed-mixcloud-advanced"),isCollapsed:!0,controls:d})):Object(r.createElement)(x.Toolbar,{icon:E.previewIcon,controls:[{icon:Object(E.downloadIcon)(s),title:Object(i.__)("There is no preview data for this show. Download?","embed-mixcloud-advanced"),isActive:!1,onClick:n}]})}n(28);function N(e){var t=e.value,n=e.onClick;return Object(r.createElement)(x.Toolbar,{className:"mea-toolbar",controls:["light","dark"].map((function(e){return{icon:"light"===e?E.lightThemeIcon:E.darkThemeIcon,title:"light"===e?Object(i.__)("Light","embed-mixcloud-advanced"):Object(i.__)("Dark","embed-mixcloud-advanced"),isActive:t===e,onClick:function(){return n(e)}}}))})}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var M=n(29),D=n(3);function V(e){var t=e.selected,n=e.onSelect,o=Object.keys(M).map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){U()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{title:Object(i.__)(M[e].title,"embed-mixcloud-advanced"),icon:D[e+"WidgetIcon"]},{isActive:t===e,onClick:function(){return n(e)}})}));return Object(r.createElement)(x.Toolbar,{className:"mea-toolbar",controls:o})}var z=M,G=n(6);function q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var F=function(e){g()(o,e);var t,n=(t=o,function(){var e,n=j()(t);if(q()){var r=j()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return O()(this,e)});function o(e){var t;return h()(this,o),(t=n.call(this,e)).setUrl=t.setUrl.bind(m()(t)),t.submit=t.submit.bind(m()(t)),t.requestPreview=t.requestPreview.bind(m()(t)),t.getWidgetProp=t.getWidgetProp.bind(m()(t)),t.__set=t.__set.bind(m()(t)),t.state={editingURL:e.attributes.editingURL||!0,url:e.attributes.url,widgetType:e.attributes.widgetType||"classic",theme:e.attributes.theme||"dark",autoplay:e.attributes.autoplay||!1,previewUrl:e.attributes.previewUrl,previewEnabled:e.attributes.previewEnabled,previewAlign:e.attributes.previewAlign||"left",previewLoading:!1,previewLoadingError:!1,widget:void 0,loadPreview:e.attributes.loadPreview},e.attributes.editingURL||setTimeout(t.submit,100),t._show=Object(r.createRef)(),t}return f()(o,[{key:"setUrl",value:function(e){this.__set({url:e}),this.props.cannotEmbed&&!this.state.editingURL&&this.__set({editingURL:!0})}},{key:"submit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;e&&e.preventDefault(),this.__set({editingURL:!1});var t=this.state,n=t.url,r=t.previewUrl,i=t.loadPreview;n&&!r&&i&&this.requestPreview()}},{key:"__set",value:function(e){this.setState(e),this.props.setAttributes(e)}},{key:"getWidgetProp",value:function(e){return z[this.state.widgetType][e]}},{key:"requestPreview",value:function(){var e=this;this.setState({previewLoading:!0,previewLoadingError:!1}),d()(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(window.location.origin+"/index.php?rest_route=/vema/v1/preview/&show_url="+e.state.url);case 2:if(!(n=t.sent).ok){t.next=9;break}return t.next=6,n.json();case 6:return t.abrupt("return",t.sent);case 9:console.error("HTTP ERROR: "+n.status);case 10:case"end":return t.stop()}}),t)})))().then((function(t){t&&void 0!==t.preview_url?e.__set({previewUrl:t.preview_url}):void 0!==t.error?e.setState({previewLoadingError:t.error}):e.setState({previewLoadingError:Object(i.__)("Server responded that something went wrong.","embed-mixcloud-advanced")}),e.setState({previewLoading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.url,o=t.loadPreview,c=t.widgetType,l=t.previewUrl,a=t.editingURL,s=t.theme,u=t.autoplay,d=t.playing,p=t.previewEnabled,h=t.previewAlign,v=t.previewLoading,f=t.previewLoadingError,w=this.props,m=w.fetching,b=w.preview,g=w.cannotEmbed,y=w.tryAgain,O=w.isSelected;if(m)return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"wp-block-embed is-loading"},Object(r.createElement)(x.Spinner,null),Object(r.createElement)("p",null,Object(i.__)("Embedding…","embed-mixcloud-advanced"))));if(!m&&(!b||g||a))return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(C,{previewInfoLink:G.d+"#preview",cannotEmbed:g,url:n,loadPreview:o,tryAgain:y,onSubmit:this.submit,onChangeUrl:function(t){return e.setUrl(t.target.value)},onChangeLoadPreview:function(){return e.setState({loadPreview:!o})}}));var k=!!this.getWidgetProp("previewIcon")&&this.getWidgetProp("previewIcon");return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(_.BlockControls,null,Object(r.createElement)(V,{selected:c,onSelect:function(t){return e.__set({widgetType:t})}}),Object(r.createElement)(N,{value:s,onClick:function(t){return e.__set({theme:t})}}),Object(r.createElement)(x.Toolbar,{controls:[{icon:"controls-play",title:Object(i.__)("Autoplay","embed-mixcloud-advanced"),isActive:u,onClick:function(t){return e.__set({autoplay:!u})}}]}),Object(r.createElement)(I,{emitLoadPreview:this.requestPreview,url:l,playing:d,previewLoading:v,previewEnabled:p,togglePreviewEnabled:function(){e.__set({previewEnabled:!e.state.previewEnabled}),e._show.current.blinkPreview()},previewAlign:h,emitChangePreviewAlign:function(t){e.__set({previewAlign:t}),e._show.current.blinkPreview()}}),Object(r.createElement)(x.Toolbar,{controls:[{icon:"edit",className:"mea_preview_control",title:Object(i.__)("Edit URL","embed-mixcloud-advanced"),onClick:function(){return e.__set({editingURL:!0})}}]})),f&&Object(r.createElement)(x.Notice,{status:"error",onRemove:function(){return e.setState({previewLoadingError:!1})}},f," ",Object(i.__)("You can","embed-mixcloud-advanced")," ",Object(r.createElement)(x.Button,{isPrimary:!0,isSmall:!0,onClick:this.requestPreview},Object(i.__)("Try again","embed-mixcloud-advanced"))," ",Object(i.__)("or","embed-mixcloud-advanced")," ",Object(r.createElement)(x.Button,{isSecondary:!0,isSmall:!0,href:G.d,target:"_blank"},Object(i.__)("Send report","embed-mixcloud-advanced"))),Object(r.createElement)(W,{ref:this._show,updateUrl:!1,url:n,height:z[c].height,previewUrl:!!p&&l,spinner:k,mini:this.getWidgetProp("mini"),autoplay:u,hideCover:this.getWidgetProp("hideCover"),hideArtwork:this.getWidgetProp("hideArtwork"),light:"light"===s,isSelected:O,previewAlign:h}))}}]),o}(r.Component);Object(o.registerBlockType)("veliky/mixcloud-show",{title:Object(i.__)("Mixcloud Advanced","embed-mixcloud-advanced"),icon:E.previewIcon,category:"embed",supports:{align:!0},attributes:{url:{type:"string"},editingURL:{type:"boolean",default:!0},widgetType:{type:"string"},theme:{type:"string"},autoplay:{type:"boolean"},previewUrl:{type:"string"},previewEnabled:{type:"boolean",default:!0},loadPreview:{type:"boolean",default:!0},previewAlign:{type:"string",default:"right"}},edit:Object(c.compose)(Object(l.withSelect)((function(e,t){var n=t.attributes,r=n.url,i=n.editingURL,o=e("core"),c=o.getEmbedPreview,l=o.isPreviewEmbedFallback,a=o.isRequestingEmbedPreview;if(!i){var s=void 0!==r&&""!==r,u=s&&c(r),d=s&&l(r),p=s&&a(r),h=!!u&&void 0===u.type&&!1===u.html,v=!!u&&u.data&&404===u.data.status,f=!!u&&!h&&!v;return{preview:f?u:void 0,fetching:p,cannotEmbed:s&&(!Object(G.c)(r)||!f||d)}}})),Object(l.withDispatch)((function(e,t){var n=t.attributes.url,r=e("core/data");return{tryAgain:function(){r.invalidateResolution("core","getEmbedPreview",[n])}}})))(F),save:function(e){var t=e.attributes,n=t.url,i=t.widgetType,o=t.previewUrl,c=t.theme,l=t.previewAlign;if(!n)return null;var a=z[i||"classic"];return Object(r.createElement)("figure",null,Object(r.createElement)(W,{updateUrl:!0,url:n,height:a.height,previewUrl:o,spinner:a.previewIcon,mini:a.mini,hideCover:a.hideCover,hideArtwork:a.hideArtwork,light:c&&"light"===c,previewAlign:l}))}})}]);